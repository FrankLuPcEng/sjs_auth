<Window x:Class="RbacWpfDemo.DeviceCrudWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WPF CRUD 範例" Height="540" Width="880">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
            <Button Content="新增"
                    Width="80"
                    Margin="0,0,8,0"
                    Command="{Binding AddCommand}" />
            <Button Content="刪除選取"
                    Width="110"
                    Margin="0,0,8,0"
                    Command="{Binding DeleteCommand}" />
            <Button Content="儲存"
                    Width="80"
                    Margin="0,0,8,0"
                    Command="{Binding SaveCommand}" />
            <Button Content="重新載入"
                    Width="100"
                    Command="{Binding ReloadCommand}" />
            <TextBlock Text="{Binding StatusMessage}"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"
                       FontWeight="SemiBold" />
        </StackPanel>

        <DataGrid Grid.Row="1"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding Devices}"
                  SelectedItem="{Binding SelectedDevice, Mode=TwoWay}"
                  CanUserAddRows="False"
                  IsReadOnly="False"
                  HeadersVisibility="Column"
                  AlternatingRowBackground="#0F000000"
                  RowBackground="#0A000000">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                                    Header="名稱"
                                    Width="2*" />
                <DataGridTextColumn Binding="{Binding Category, UpdateSourceTrigger=PropertyChanged}"
                                    Header="分類"
                                    Width="2*" />
                <DataGridTextColumn Binding="{Binding Status, UpdateSourceTrigger=PropertyChanged}"
                                    Header="狀態"
                                    Width="*"
                                    MaxWidth="140" />
                <DataGridTextColumn Binding="{Binding CreatedAt, StringFormat=yyyy-MM-dd HH:mm}"
                                    Header="建立時間"
                                    Width="2*"
                                    IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Id}"
                                    Header="Id"
                                    Width="2*"
                                    IsReadOnly="True" />
            </DataGrid.Columns>
        </DataGrid>

        <TextBlock Grid.Row="2"
                   Margin="0,12,0,0"
                   Text="直接在表格編輯，按下「儲存」會寫入 devices.json（不存在會自動建立）。"
                   FontStyle="Italic" />
    </Grid>
</Window>
