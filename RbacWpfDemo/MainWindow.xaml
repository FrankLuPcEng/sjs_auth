<Window x:Class="RbacWpfDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RBAC Demo" Height="520" Width="760">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Margin="0,0,0,12" Grid.Row="0">
            <TextBlock Text="Current User:" VerticalAlignment="Center" Margin="0,0,8,0" />
            <ComboBox Width="220"
                      ItemsSource="{Binding Users}"
                      DisplayMemberPath="Name"
                      SelectedValuePath="Id"
                      SelectedValue="{Binding SelectedUserId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <GroupBox Header="Current Roles" Margin="0,0,12,0">
                <ListBox ItemsSource="{Binding CurrentRoles}" />
            </GroupBox>
            <GroupBox Header="Current Permissions" Grid.Column="1">
                <ListBox ItemsSource="{Binding CurrentPermissions}" />
            </GroupBox>
        </Grid>

        <StackPanel Grid.Row="2" Margin="0,12,0,0">
            <TextBlock Text="IsEnabled (ViewModel bool)" FontWeight="SemiBold" />
            <StackPanel Orientation="Horizontal" Margin="0,8,0,16">
                <Button Content="Open Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding OpenDeviceCommand}"
                        IsEnabled="{Binding CanOpenDevice}" />
                <Button Content="Edit Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding EditDeviceCommand}"
                        IsEnabled="{Binding CanEditDevice}" />
                <Button Content="View Report"
                        Width="140"
                        Command="{Binding ViewReportCommand}"
                        IsEnabled="{Binding CanViewReport}" />
            </StackPanel>

            <TextBlock Text="IsEnabled (Converter)" FontWeight="SemiBold" />
            <StackPanel Orientation="Horizontal" Margin="0,8,0,16">
                <Button Content="Open Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding OpenDeviceCommand}"
                        IsEnabled="{Binding Converter={StaticResource PermissionToIsEnabledConverter}, ConverterParameter=Device.Read}" />
                <Button Content="Edit Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding EditDeviceCommand}"
                        IsEnabled="{Binding Converter={StaticResource PermissionToIsEnabledConverter}, ConverterParameter=Device.Edit}" />
                <Button Content="View Report"
                        Width="140"
                        Command="{Binding ViewReportCommand}"
                        IsEnabled="{Binding Converter={StaticResource PermissionToIsEnabledConverter}, ConverterParameter=Report.View}" />
            </StackPanel>

            <TextBlock Text="Visibility (Converter)" FontWeight="SemiBold" />
            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                <Button Content="Open Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding OpenDeviceCommand}"
                        Visibility="{Binding Converter={StaticResource PermissionToVisibilityConverter}, ConverterParameter=Device.Read}" />
                <Button Content="Edit Device"
                        Width="140"
                        Margin="0,0,8,0"
                        Command="{Binding EditDeviceCommand}"
                        Visibility="{Binding Converter={StaticResource PermissionToVisibilityConverter}, ConverterParameter=Device.Edit}" />
                <Button Content="View Report"
                        Width="140"
                        Command="{Binding ViewReportCommand}"
                        Visibility="{Binding Converter={StaticResource PermissionToVisibilityConverter}, ConverterParameter=Report.View}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
